<!DOCTYPE html>
<html lang="en">

<head>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>3Dmol.js Documentation Using 3Dmol within your code</title>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="./build/entry.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,400,700|Inconsolata,700" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css">
  <link type="text/css" rel="stylesheet" href="styles/app.min.css">
  <link type="text/css" rel="stylesheet" href="styles/iframe.css">
  <link type="text/css" rel="stylesheet" href="../tutorials/style.css">
  <script async defer src="https://buttons.github.io/buttons.js"></script>

  
</head>



<body class="layout small-header">
    <div id="stickyNavbarOverlay"></div>
    

<div class="top-nav">
    <div class="inner">
        <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
        <div class="logo">
            
             
                <a href="index.html">
                    <h1 class="navbar-item"><a href="http://3dmol.org"><b>3Dmol</b>.js</a></h1>
                </a>
            
        </div>
        <div class="menu">
            
            <div class="navigation">
                <a
                    href="index.html"
                    class="link"
                >
                    Documentation
                </a>
                
                <div class="dropdown is-hoverable is-right">
                    <a class="dropdown-trigger link">
                        Tutorials
                        <i class="fas fa-chevron-down fa-xs"></i>
                    </a>
                    <div class="dropdown-menu">
                        <div class="dropdown-content">
                        
                            <a class="dropdown-item" href="tutorial-code.html">
                                Using 3Dmol within your code
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-embeddable.html">
                                Embedding a 3Dmol Viewer
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-learning_environment.html">
                                Active Learning with 3Dmol.js
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-url.html">
                                Viewing Molecules with the 3Dmol Server
                            </a>
                        
                        </div>
                    </div>
                </div>
                
                 
                    
                        <a
                            class="link user-link "
                            href="https://github.com/3dmol/3Dmol.js"
                        >
                            Github
                        </a>
                    
                
                
            </div>
        </div>
    </div>
</div>
    <div id="main">
        <div
            class="sidebar tutorials"
            id="sidebarNav"
        >
            
            <nav>
                
                    <div class="category"><h3>Tutorials</h3><ul><li><a href="tutorial-code.html">Using 3Dmol within your code</a></li><li><a href="tutorial-embeddable.html">Embedding a 3Dmol Viewer</a></li><li><a href="tutorial-learning_environment.html">Active Learning with 3Dmol.js</a></li><li><a href="tutorial-url.html">Viewing Molecules with the 3Dmol Server</a></li></ul></div>
                
            </nav>
        </div>
        <div class="core" id="main-content-wrapper">
            <div class="content">
                <header class="page-title">
                    <p>Tutorial</p>
                    <h1>Using 3Dmol within your code</h1>
                </header>
                <section>

<article>
    <script src="../build/3Dmol-min.js"></script>
<script
  src="https://code.jquery.com/jquery-3.6.4.min.js"
  integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8="
  crossorigin="anonymous"></script>
<style>
.mol-container {
  width: 100%;
  height: 400px;
  position: relative;
  border: 1px solid #999;
}

.align-center {
  width: 600px;
  margin: 20px auto 10px;
  text-align: center;
}
</style>
<p>The most simple way to display and style a 3Dmol instance is by embedding 3Dmol parameters <a href="./tutorial-url.html">within a URL</a> or <a href="./tutorial-embeddable.html">within HTML tags</a>.</p>
<p>However, if you are interacting with this viewer from your own web pages then you may want to take advantage of the 3Dmol API.</p>
<p>Here we will use the API to create, load and style the 3Dmol instance. Note, this tutorial assumes a basic knowledge of HTML, Javascript and jQuery.</p>
<h3>Creating the 3DMol instance</h3>
<p>First, make sure your HTML document links to the 3Dmol code.</p>
<pre class="prettyprint source"><code>&lt;script src=&quot;https://3Dmol.org/build/3Dmol-min.js&quot;>&lt;/script>
</code></pre>
<p>Now create a container tag in the HTML document that will hold the vizualisation.</p>
<pre class="prettyprint source"><code>&lt;div id=&quot;container-01&quot; class=&quot;mol-container&quot;>&lt;/div>
</code></pre>
<p>Note: 3Dmol will adopt the size of the container so we need to make sure this size has been explicitly set (i.e. use CSS or an inline <code>style</code> attribute).</p>
<pre class="prettyprint source"><code>&lt;style>
.mol-container {
  width: 60%;
  height: 400px;
  position: relative;
}
&lt;/style>
</code></pre>
<p>Once the web page has loaded, we can create a new instance of 3Dmol.</p>
<p>To make sure everything works, we are going to add a sphere, set the camera, render the scene, then add a zoom.</p>
<pre class="prettyprint source"><code>&lt;script>
  let element = document.querySelector('#container-01');
  let config = { backgroundColor: 'orange' };
  let viewer = $3Dmol.createViewer( element, config );
  viewer.addSphere({ center: {x:0, y:0, z:0}, radius: 10.0, color: 'green' });
  viewer.zoomTo();
  viewer.render();
  viewer.zoom(0.8, 2000);
&lt;/script>
</code></pre>
<p>Documentation: <a href="$3Dmol.html#createViewer">$3Dmol.createViewer()</a></p>
<div class="align-center">
  <button id="btn-01" class="btn btn-primary">Try it</button>
  <div id="container-01" class="mol-container"></div>
</div>
<script>
jQuery(function() {
  let viewer = '';
  $('#btn-01').on('click', function() {
    let element = $('#container-01');
    let config = { backgroundColor: 'orange' };
    
    viewer = $3Dmol.createViewer( element, config );
    viewer.addSphere({ center: {x:0, y:0, z:0}, radius: 10.0, color: 'green' });
    viewer.zoomTo();
    viewer.render();
    viewer.zoom(0.8, 2000);
  });
  
  $('#btn-01-alt').on('click', function() {
    viewer.setBackgroundColor('white');
  });
});
</script>
<p>If this has worked, you should see a rather fetching green ball in front of an orange background. If not, then now's a good time to get familiar with the developer console on your favourite browser and check for typos (<a href="https://developer.mozilla.org/en/docs/Tools/Web_Console">Firefox</a>, <a href="https://developers.google.com/web/tools/chrome-devtools/">Chrome</a>, ...)</p>
<p>Note, the <code>viewer</code> variable now contains an instance of GLViewer and we use the <a href="$3Dmol.GLViewer">$3Dmol.GLViewer API</a> to change the orange background white.</p>
<pre class="prettyprint source"><code>  viewer.setBackgroundColor('white');
</code></pre>
<div class="align-center">
  <button id="btn-01-alt" class="btn btn-primary">Try it</button>
</div>
<p>Documentation: <a href="$3Dmol.GLViewer">$3Dmol.GLViewer API</a></p>
<h3>Loading data dynamically</h3>
<p>Since jQuery is already loaded, we'll use <code>jQuery.ajax()</code> to load PDB data from an external source. If the operation is successful then we can feed the raw PDB data into our viewer, otherwise we can report the problem.</p>
<pre class="prettyprint source"><code>  let viewer = $3Dmol.createViewer( element, config );
  let pdbUri = '/path/to/your/pdb/files/1ycr.pdb';
  jQuery.ajax( pdbUri, { 
    success: function(data) {
      let v = viewer;
      v.addModel( data, &quot;pdb&quot; );                       /* load data */
      v.setStyle({}, {cartoon: {color: 'spectrum'}});  /* style all atoms */
      v.zoomTo();                                      /* set camera */
      v.render();                                      /* render scene */
      v.zoom(1.2, 1000);                               /* slight zoom */
    },
    error: function(hdr, status, err) {
      console.error( &quot;Failed to load PDB &quot; + pdbUri + &quot;: &quot; + err );
    },
  });
</code></pre>
<p>All these methods (and more) are covered in detail in the <a href="$3Dmol.GLViewer">API documentation for GLViewer</a>.</p>
<div class="align-center">
  <button class="btn btn-primary" id="btn-02">Try it</button>
  <div id="container-02" class="mol-container"></div>
</div>
<script>
jQuery(function() {
  let element = $('#container-02');
  let config = { defaultcolors: $3Dmol.rasmolElementColors, backgroundColor: 'white' };
  let viewer = $3Dmol.createViewer( element, config );

  $('#btn-02').on('click', function() {
    let pdbUri = '../tutorials/doc-data/1ycr.pdb';
    jQuery.ajax( pdbUri, { 
      success: function(data) {
        let v = viewer;
        v.addModel( data, "pdb" );                       /* load data */
        v.setStyle({}, {cartoon: {color: 'spectrum'}});  /* style all atoms */
        v.zoomTo();                                      /* set camera */
        v.render();                                      /* render scene */
        v.zoom(1.2, 1000);                               /* slight zoom */
      },
      error: function(hdr, status, err) {
        console.error( "Failed to load PDB " + pdbUri + ": " + err );
      },
    });
  })
})
</script>
<p><em><strong>Note on using external data files (CORS)</strong></em></p>
<p>By default, Javascript will only be allowed to load data from the same domain as the web page from which it has been invoked (i.e. if your web page is being served from &quot;my.domain.com&quot; then javascript on that web page will only be able to load data from &quot;my.domain.com&quot;). This is a standard security restriction called &quot;Cross-origin resource sharing&quot; <a href="https://en.wikipedia.org/wiki/Cross-origin_resource_sharing">CORS</a> - there are ways around this restriction, however for the sake of this tutorial we assume that the external PDB data file resides on your server.</p>
<h2>Dynamic styles</h2>
<p>One of the advantages of using the API is that you have greater control of deciding how 3Dmol should interact to other events going on in the browser (user interaction, javascript events, etc).</p>
<p>Another advantage is that this also gives you more flexibility with styling.</p>
<p>Here we create our own function that will decide on the color of a particular atom based on its own properties:</p>
<pre class="prettyprint source"><code>  let colorAsSnake = function(atom) {
    return atom.resi % 2 == 0 ? 'white' : 'green';
  };
</code></pre>
<p>Then we can apply that colouring function to a particular atom selection (in this case, all atoms in chain 'A')</p>
<pre class="prettyprint source"><code>  viewer.setStyle({chain: 'A'}, {cartoon: {colorfunc: colorAsSnake}});
</code></pre>
<div class="align-center">
  <button class="btn btn-primary" id="btn-03">Try it</button>
  <div id="container-03" class="mol-container"></div>
</div>
<script>
jQuery(function() {
  let element = $('#container-03');
  let config = { defaultcolors: $3Dmol.rasmolElementColors, backgroundColor: 'white' };
  let viewer = $3Dmol.createViewer( element, config );
  let colorAsSnake = function(atom) {
    return atom.resi % 2 == 0 ? 'white' : 'green';
  };
  $('#btn-03').on('click', function() {
    let pdbUri = '../tutorials/doc-data/1ycr.pdb';
    jQuery.ajax( pdbUri, { 
      success: function(data) {
        let v = viewer;
        v.addModel( data, "pdb" );
        v.setStyle( {}, {cartoon: { colorfunc: colorAsSnake }} );
        v.zoomTo();
        v.render();
        v.zoom(1.2, 1000);
      },
      error: function(hdr, status, err) {
        console.error( "Failed to load PDB " + pdbUri + ": " + err );
      },
    });
  })
})
</script>
</article>

</section>

            </div>
            
            <footer class="footer">
                <div class="content has-text-centered">
                    <p>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.2</a></p>
                    <p class="sidebar-created-by">
                        <a href="https://github.com/SoftwareBrothers/better-docs" target="_blank">BetterDocs theme</a> provided with <i class="fas fa-heart"></i> by
                        <a href="http://softwarebrothers.co" target="_blank">SoftwareBrothers - JavaScript Development Agency</a>
                    </p>
                </div>
            </footer>
            
        </div>
        <div id="side-nav" class="side-nav">
        </div>
    </div>
<script src="scripts/app.min.js"></script>
<script>hljs.highlightAll();</script>
<script src="scripts/linenumber.js"> </script>


</body>
</html>